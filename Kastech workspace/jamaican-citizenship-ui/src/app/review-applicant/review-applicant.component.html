<block-ui>
  <div class="container">
    <div *ngIf="showDescentForm">

      <h4 class="wrapper">DECENT APPLICATION FORM</h4>
      <div *ngIf='showErrorMsg' class="alert alert-danger" role="alert">
        {{showErrorMsg}}
        <span *ngIf="submitted && f.dob.errors"><br />Date of birth <b>should not be a future date</b>, please select
          correct date</span>
      </div>

      <form [formGroup]='descentForm' autocomplete="off">
        <div class="profileBox">
          <div class="row">
            <div class="col">
              <label>Last name<span class="glyphicon">&#x2a;</span> </label> &nbsp;&nbsp;
              <input type="text" class="col-8 " formControlName="lastname" placeholder="Last name"
                [ngClass]="{ 'is-invalid': submitted && f.lastname.errors }">
            </div>
            <div class="col">
              <label>Middle name</label> &nbsp;&nbsp;
              <input type="text" class="col-7" formControlName="middlename" placeholder="Middle name">
            </div>
            <div class="col">
              <label>First name<span class="glyphicon">&#x2a;</span></label> &nbsp;&nbsp;
              <input type="text" class="col-8" formControlName="firstname" placeholder="First name"
                [ngClass]="{ 'is-invalid': submitted && f.firstname.errors }">
            </div>
          </div>

          <div class="row">
            <div class="col-5">
              <label class='dob'>Date of Birth<span class="glyphicon">&#x2a;</span></label>
              <input type="text" bsDatepicker [bsConfig]="datePickerConfig" class="col-8" formControlName="dob"
                placeholder="Select Date of Birth" [ngClass]="{ 'is-invalid': submitted && f.dob.errors }"
                [maxDate]="datePickerConfig.maxDate">
            </div>


            <div class="col-sm">
              <label>Place of Birth<span class="glyphicon">&#x2a;</span></label>
              <input type="text" class="col-9" formControlName="pob" placeholder="Place of birth"
                [ngClass]="{ 'is-invalid': submitted && f.pob.errors }" />
            </div>


          </div>


          <div class="row">
            <div class="col-5">
              <label class="email-label">Address Line 1<span class="glyphicon">&#x2a;</span></label>
              <input type="text" class="col-8" formControlName="address1" placeholder="Address"
                [ngClass]="{ 'is-invalid': submitted && f.address1.errors }">

            </div>
            <div class="col-sm">
              <label>Country<span class="glyphicon">&#x2a;</span></label>
              <select class="col-9 selectBoxAlign" formControlName="country" id="exampleFormControlSelect1"
                [ngClass]="{ 'is-invalid': submitted && f.country.errors }">
                <option for="code" name="pob" *ngFor="let country of countries" [ngValue]="country.name">
                  {{country.name }}
                </option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="col-5">
              <label class="email-label">Address Line 2<span class="glyphicon">&#x2a;</span></label>
              <input type="text" class="col-8" formControlName="address2" placeholder="Address"
                [ngClass]="{ 'is-invalid': submitted && f.address2.errors }">

            </div>
            <div class="col-sm">
              <label>Phone number<span class="glyphicon">&#x2a;</span></label>
              <input type="text" class="col-9" formControlName="number" placeholder="Telephone number"
                [ngClass]="{ 'is-invalid': submitted && f.number.errors }">
            </div>
          </div>

          <div class="row">
            <div class="col-5">
              <label class="zip-code">Zip/Postal Code<span class="glyphicon">&#x2a;</span></label>
              <input type="text" class="col-8" formControlName="zip" placeholder="Zip / Postal Code"
                [ngClass]="{ 'is-invalid': submitted && f.zip.errors }">
            </div>

            <div class="col-5">
              <label>Gender<span class="glyphicon">&#x2a;</span></label>
              <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" formControlName="gender" [ngClass]="{ 'is-invalid': submitted && f.gender.errors }"
                  value='male' id="customRadioInline1" name="gender" class="custom-control-input">
                <label class="custom-control-label" for="customRadioInline1">Male</label>
              </div>
              <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" formControlName="gender" [ngClass]="{ 'is-invalid': submitted && f.gender.errors }"
                  value='female' id="customRadioInline2" name="gender" class="custom-control-input">
                <label class="custom-control-label" for="customRadioInline2">Female</label>
              </div>
            </div>
          </div>
          <!-- <div class="row">
            <div class="col-5">
              <label class="email-label">Email Address<span class="glyphicon">&#x2a;</span></label>
              <input type="text" class="col-8" formControlName="email" placeholder="Email address"
                [ngClass]="{ 'is-invalid': submitted && f.email.errors }">
            </div>
          </div> -->

          <div class="row">
            <div class="col-5">
              <label class="email-label1">Email Address<span class="glyphicon">&#x2a;</span></label>
              <input type="text" class="col-8" formControlName="email" placeholder="Email address"
                [ngClass]="{ 'is-invalid': submitted && f.email.errors }">
            </div>


          </div>

        </div>

        <span class="wrapperHeader">
          Particulars Parents
        </span>
        <div class="boxLayout">
          <div class="box" style="border:0px">
            <span class="wrapper">Father</span>
            <div class="layout">
              <div class="row">
                <div>
                  <label>Last Name<span class="glyphicon">&#x2a;</span></label>
                  <input type='text' formControlName='flastname'
                    [ngClass]="{ 'is-invalid': submitted && f.flastname.errors }" class='textAlign' name='lname' />
                </div>
                <div>
                  <label>First Name<span class="glyphicon">&#x2a;</span></label>
                  <input type='text' formControlName='ffirstname'
                    [ngClass]="{ 'is-invalid': submitted && f.ffirstname.errors }" class='textAlign' name='fname' />
                </div>
              </div>
              <div class="row">
                <div>
                  <label>Date of Birth<span class="glyphicon">&#x2a;</span></label>
                  <input type='text' bsDatepicker [bsConfig]="datePickerConfig" bsDatepicker class='dateAlign'
                    (change)="dateChange()" [ngClass]="{ 'is-invalid': submitted && f.fdob.errors }"
                    formControlName='fdob' name='lname' autocomplete="off" />
                </div>
                <div>
                  <label>Place of Birth<span class="glyphicon">&#x2a;</span></label>
                  <input type='text' formControlName='fpob' [ngClass]="{ 'is-invalid': submitted && f.fpob.errors }"
                    class='pobAlign' name='fpob' />
                </div>
              </div>
              <div class="row">
                <div>
                  <label class='parentsCountry'>Country<span class="glyphicon">&#x2a;</span></label>
                  <select class='parentsCountry' id="exampleFormControlSelect1" formControlName='fcountry'
                    [ngClass]="{ 'is-invalid': submitted && f.fcountry.errors }">
                    <option for="code" name="fcountry" *ngFor="let country of countries" [ngValue]="country.name">
                      {{country.name }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="box">
            <span class="wrapper">Mother</span>
            <div class="layout">
              <div class="row">
                <div>
                  <label>Last Name<span class="glyphicon">&#x2a;</span></label>
                  <input type='text' class='textAlign' formControlName='mlastname' name='lname'
                    [ngClass]="{ 'is-invalid': submitted && f.mlastname.errors }" />
                </div>
                <div>
                  <label>First Name<span class="glyphicon">&#x2a;</span></label>
                  <input type='text' class='textAlign' formControlName='mfirstname' name='lname'
                    [ngClass]="{ 'is-invalid': submitted && f.mfirstname.errors }" />
                </div>
              </div>
              <div class="row">
                <div>
                  <label>Date of Birth<span class="glyphicon">&#x2a;</span></label>
                  <input type='text' bsDatepicker [bsConfig]="datePickerConfig" bsDatepicker class='dateAlign'
                    [ngClass]="{ 'is-invalid': submitted && f.mdob.errors }" formControlName='mdob' name='lname'
                    autocomplete="off" />
                </div>

                <div>
                  <label>Place of Birth<span class="glyphicon">&#x2a;</span></label>
                  <input type='text' formControlName='mpob' [ngClass]="{ 'is-invalid': submitted && f.mpob.errors }"
                    class='pobAlign' name='mpob' />
                </div>
              </div>
              <div class='row'>
                <div>
                  <label class='parentsCountry'>Country<span class="glyphicon">&#x2a;</span></label>
                  <select id="exampleFormControlSelect1" formControlName='mcountry'
                    [ngClass]="{ 'is-invalid': submitted && f.mcountry.errors }">
                    <option for="code" name="mcountry" *ngFor="let country of countries" [ngValue]="country.name">
                      {{country.name }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>


        <span class="wrapperHeader">
          Particulars Grand Parents<br />
          <span style='font-size: 0.75rem;'>(If applicable)</span>
        </span>
        <span class="wrapper">Paternal</span>
        <span class="wrapper">Maternal</span>
        <div class="boxLayoutSmall">
          <div class="boxSmall" style='border-left:0px'>
            <div class="layout">
              <span class='wrapperBox'>Father</span>
              <div class="row">
                <div>
                  <label>Last Name</label>
                  <input type='text' name='lname' formControlName='plastname1' class='textAlignSmall'
                    [ngClass]="{ 'is-invalid': submitted && f.plastname1.errors }" />
                </div>
                <div>
                  <label>First Name</label>
                  <input type='text' name='lname' formControlName='pfirstname1' class='textAlignSmall'
                    [ngClass]="{ 'is-invalid': submitted && f.pfirstname1.errors }" />
                </div>
                <!-- </div>
                <div class="row"> -->
                <div>
                  <label>Date of Birth</label>
                  <input type='text' class='dateAlignGrandParents' bsDatepicker [bsConfig]="datePickerConfig"
                    [ngClass]="{ 'is-invalid': submitted && f.pdob1.errors }" bsDatepicker formControlName='pdob1'
                    name='lname' autocomplete="off" />
                </div>
                <div>
                  <label>Country</label>
                  <select class='dropDown' formControlName='ppob1' id="exampleFormControlSelect1"
                    [ngClass]="{ 'is-invalid': submitted && f.ppob1.errors }">
                    <option for="code" name="pob" *ngFor="let country of countries" [ngValue]="country.name">
                      {{country.name }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="boxSmall">
            <!-- <span class="wrapper">Father</span> -->
            <div class="layout">
              <span class='wrapperBox'>Mother</span>
              <div class="row">
                <div>
                  <label>Last Name</label>
                  <input type='text' name='lname' formControlName='plastname2' class='textAlignSmall'
                    [ngClass]="{ 'is-invalid': submitted && f.plastname2.errors }" />
                </div>
                <div>
                  <label>First Name</label>
                  <input type='text' name='lname' formControlName='pfirstname2' class='textAlignSmall'
                    [ngClass]="{ 'is-invalid': submitted && f.pfirstname2.errors }" />
                </div>
                <!-- </div>
                <div class="row"> -->
                <div>
                  <label>Date of Birth</label>
                  <input type='text' class='dateAlignGrandParents' bsDatepicker [bsConfig]="datePickerConfig1"
                    [ngClass]="{ 'is-invalid': submitted && f.pdob2.errors }" bsDatepicker name='lname'
                    formControlName='pdob2' autocomplete="off" />
                </div>
                <div>
                  <label>Country</label>
                  <select class='dropDown' id="exampleFormControlSelect1" formControlName='ppob2'
                    [ngClass]="{ 'is-invalid': submitted && f.ppob2.errors }">
                    <option for="code" name="pob" *ngFor="let country of countries" [ngValue]="country.name">
                      {{country.name }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="boxSmall">
            <!-- <span class="wrapper">Father</span> -->
            <div class="layout">
              <span class='wrapperBox'>Father</span>
              <div class="row">
                <div>
                  <label>Last Name</label>
                  <input type='text' name='lname' formControlName='mlastname1'
                    [ngClass]="{ 'is-invalid': submitted && f.mlastname1.errors }" class='textAlignSmall' />
                </div>
                <div>
                  <label>First Name</label>
                  <input type='text' name='lname' formControlName='mfirstname1' class='textAlignSmall'
                    [ngClass]="{ 'is-invalid': submitted && f.mfirstname1.errors }" />
                </div>
                <!-- </div>
                <div class="row"> -->
                <div>
                  <label>Date of Birth</label>
                  <input type='text' class='textAlignSmallPaternal' bsDatepicker [bsConfig]="datePickerConfig"
                    [ngClass]="{ 'is-invalid': submitted && f.mdob1.errors }" bsDatepicker name='lname'
                    formControlName='mdob1' autocomplete="off" />
                </div>
                <div>
                  <label>Country</label>
                  <select class='dropDown' formControlName='mpob1' id="exampleFormControlSelect1"
                    [ngClass]="{ 'is-invalid': submitted && f.mpob1.errors }">
                    <option for="code" name="pob" *ngFor="let country of countries" [ngValue]="country.name">
                      {{country.name }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="boxSmall">
            <!-- <span class="wrapper">Mother</span> -->
            <div class="layout">
              <span class='wrapperBox'>Mother</span>
              <div class="row">
                <div>
                  <label>Last Name</label>
                  <input type='text' class='textAlignSmall' formControlName='mlastname2' name='lname'
                    [ngClass]="{ 'is-invalid': submitted && f.mlastname2.errors }" />
                </div>
                <div>
                  <label>First Name</label>
                  <input type='text' class='textAlignSmall' formControlName='mfirstname2' name='lname'
                    [ngClass]="{ 'is-invalid': submitted && f.mfirstname2.errors }" />
                </div>
                <!-- </div>
                <div class="row"> -->
                <div>
                  <label>Date of Birth</label>
                  <input type='text' class='dateAlignGrandParents' bsDatepicker [bsConfig]="datePickerConfig"
                    [ngClass]="{ 'is-invalid': submitted && f.mdob2.errors }" bsDatepicker name='lname'
                    formControlName='mdob2' autocomplete="off" />
                </div>
                <div>
                  <label>Country</label>
                  <select class='dropDown' formControlName='mpob2' id="exampleFormControlSelect1"
                    [ngClass]="{ 'is-invalid': submitted && f.mpob2.errors }">
                    <option for="code" name="pob" *ngFor="let country of countries" [ngValue]="country.name">
                      {{country.name }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div style='float:right;'>

          <button (click)='next(descentForm.value)' type="button" class="btn btn-light">Next</button>

        </div>
      </form>
    </div>




  </div>

  <div *ngIf='showDocumentUpload'>
    <section>
      <div class="container">
        <div class="header-tag text-center">
          <h2 class="m-4">Document Upload</h2>
        </div>
        <form>
          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <label class="sr-only" for="inlineFormInputGroup">Sam James</label>
              <div class="input-group mb-4">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <h5>Application #</h5>
                  </div>
                </div>
                <span class='formId'>{{descentFormSessoin.id}}</span>
                <!-- <input type="number" class="form-control" id="inlineFormInputGroup" placeholder="123456" disabled> -->
              </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <label class="sr-only" for="inlineFormInputGroup">Sam James</label>
              <div class="input-group mb-4">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <h5>Date Submitted</h5>
                  </div>
                </div>
                <span class='formId'>{{descentFormSessoin.appliedDate}}</span>
                <!-- <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="05/07/2019" disabled> -->
              </div>
            </div>
          </div>
        </form>



        <div class="document-block">

          <div id="lightgallery">
            <div>
              <a target='_bank' *ngFor='let document of descentFormSessoin.documents' href="{{document.filePath}}">
                <img src="{{document.filePath}}" />
                <p class="w-50">{{document.fileName}}</p>
              </a>
            </div>
          </div>

          <div class="document_btns text-right">
            <button *ngIf="loginType==='localdeskclerk'" type="button" class="clr-btn style-btn" style='width:150px;' (click)="updateStatus('cs')" >Refer for Approval</button>
            <button *ngIf="loginType==='deskClerk'" type="button" class="clr-btn style-btn" style='width:200px;' (click)="updateStatus('pas')" >Process Scheduled Appointment</button>
            <button *ngIf="loginType==='agentView'" type="button" class="clr-btn style-btn" style='width:150px;' (click)="updateStatus('om')" >Refer for Approval</button>
            <button *ngIf="loginType==='operationsmanager'" type="button" class="clr-btn style-btn" style='width:150px;' (click)="updateStatus('director')" >Refer for Approval</button>
            <button *ngIf="loginType==='director'" type="button" class="clr-btn style-btn" style='width:150px;' (click)="updateStatus('completed')" >Complete</button>

            <button type="button" class="clr-btn style-btn" (click)="incomplete('incomplete')">Incomplete</button>
            <button type="button" class="clr-btn style-btn" (click)="refer('refer')">Refer</button>
            <button type="button" class="clr-btn style-btn" (click)="nextClick('next')">Next</button>
          </div>

        </div>






      </div>
    </section>

  </div>

</block-ui>
<br /><br />